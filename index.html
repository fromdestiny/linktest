<html>

<body>

<br>  
<a href="intent://reserve?projectId=1234#Intent;scheme=com.buxikorea.buxi.user;package=com.buxikorea.buxi.user;end">intent scheme</a>
<br>
<a href="com.buxikorea.buxi.user://reserve?projectId=1234">only a tag</a>

<br>
<!-- <button onclick="myFunction()">gogo Myfunction</button> -->
<a href="intent://reserve?projectId=1234/#Intent;scheme=com.buxikorea.buxi.user;package=com.buxikorea.buxi.user;S.browser_fallback_url=http%3A%2F%2Fzxing.org;end"> Take a QR code </a>
  <script>
  
/*
var intentURI = [
    'intent://reserve?projectId=1234#Intent',
    'scheme=com.buxikorea.buxi.user',
    'package=com.buxikorea.buxi.user',
    'S.browser_fallback_url=http%3A%2F%2Fwww.naver.com',
    'end'
].join(';');

 
function myFunction() {
              location.href = "intent://reserve?projectId=1234#Intent;scheme=com.buxikorea.buxi.user;package=com.buxikorea.buxi.user;end";
         }
         */ 

    
    
    
    var SCHEME_FOR_TEST = 'intent://reserve#Intent;scheme=com.buxikorea.buxi.user;end';
var ua = navigator.userAgent,
    isAndroid = /android/i.test(ua),
    isIOS = /iphone|ipad|ipod/i.test(ua),
    isSupportingIntent = (
        tui.util.browser.chrome &&
        +(tui.util.browser.version) > 24 &&
        !(/firefox|opr|fb_iab/i.test(ua))
    );

var loader = tui.util.defineModule('appLoader', {
    isPrepared: false,

    isNotSupportedFallbackURL: false,

    initialize: function() {
        if (isAndroid) {
            if (isSupportingIntent) {
                this._checkSupportingFallbackURL();
                this.load = this._launchAppViaIntent;
            } else {
                this.load = this._launchAppViaIframe;
            }
        } else if (isIOS) {
            //...
        } else {
            alert('run in mobile');
        }
    },

    setParams: function(params) {
        this.appURI = params.appURI;
        this.fallbackURL = params.fallbackURL;
    },

    _createHiddenIframe: function() {
        var iframe = document.createElement('IFRAME');

        iframe.style.display = 'none';
        return iframe;
    },

    _launchAppViaIframe: function() {
        var iframe = this._createHiddenIframe(),
            start = +new Date(),
            self = this;

        iframe.src = self.appURI;
        iframe.addEventListener('load', function onload() {
            iframe.removeEventListener('load', onload);
            document.body.removeChild(iframe);
        });
        document.body.appendChild(iframe);

        setTimeout(function() {
            var now = +new Date();
            if (now - start < 2000) {
                top.location.href = self.fallbackURL;
            }
        }, 500);
    },

    _checkSupportingFallbackURL: function() {
        var iframe = this._createHiddenIframe(),
            self = this;

        iframe.addEventListener('load', function onload() {
            if (iframe.src === SCHEME_FOR_TEST) {
                self.isNotSupportedFallbackURL = true;
            } else {
                iframe.removeEventListener('load', onload);
                document.body.removeChild(iframe);
                self.isPrepared = true;
            }
        });
        iframe.src = SCHEME_FOR_TEST;

        document.body.appendChild(iframe);
        setTimeout(function() {
            iframe.src = '';
        }, 100);
    },

    _launchAppViaIntent: function() {
        var popup,
            self = this;

        if (!this.isPrepared) {
            setTimeout(this.load.bind(this), 100);
            return;
        }

        if (!this.isNotSupportedFallbackURL) {
            window.location.href = self.appURI;
            return;
        }

        popup = window.open('');
        if (popup) {
            popup.addEventListener('unload', function onUnload() {
                setTimeout(function () {
                    if (popup.opener) {
                        popup.opener.location.href = self.fallbackURL;
                    }
                }, 10);
                popup.close();
                popup.removeEventListener('unload', onUnload);
            });
            popup.location.href = this.appURI.replace(/package=.*?;/, '');
        } else {
            alert('팝업 허용해주세요');
        }
    },

    load: function() {
        alert('load() is not implemented!');
    }
});
    
    
       loader.setParams({
            appURI: [
                'intent://open#Intent',
                'scheme=xxpayco',
                'package=com.nhnent.payapp',
                'S.browser_fallback_url=http%3A%2F%2Fwww.payco.com',
                'end'
            ].join(';'),

            fallbackURL: 'http://www.payco.com'
        });
        loader.load();
  
</script>

</body>
</html>



<!--
<a href="intent://whatever/#Intent;scheme=myapp;package=com.what.ever.myapp;S.myextra=mystring;end">Do Whatever</a>
String => 'S'
Boolean =>'B'
Byte => 'b'
Character => 'c'
Double => 'd'
Float => 'f'
Integer => 'i'
Long => 'l'
Short => 's'
var iframe = document.createElement('iframe');
          iframe.style.visibility = 'hidden';
          iframe.src = '{com.buxikorea.buxi.user}';
          document.body.appendChild(iframe);
          document.body.removeChild(iframe); // back 호출시 캐싱될 수 있으므로 제거

-->
